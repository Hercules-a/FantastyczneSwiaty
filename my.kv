#:set but_pos (10, 10)

<Button>:
    valign: 'center'
    halign: 'center'
    size_hint_y: None
    height: '30dp'

<ChosenCardButton@ToggleButton>:
    height: '30dp'
    size_hint_y: None
    text_size: self.size
    halign: 'center'

<MyLabel@Label>:
    valign: 'center'
    halign: 'center'
    size_hint_y: None
    text_size: self.size
    height: '30dp'

<SelectCardWindow>:
    __safe_id: [dropdown0.__self__, dropdown1.__self__, dropdown2.__self__, dropdown3.__self__]

    GridLayout:
        cols: 1
        anchor_y: 'top'
        size: root.width - 10, root.height - 10
        pos: 5, 5

        GridLayout:
            rows: 1
            size_hint_y: None
            height: '30dp'


            MyLabel:
                text: "Wybrano {}/7".format('0' if root.count_cards == '' else root.count_cards)
            MyLabel:
                text: "Punkty: {}".format('0' if root.sum_to_display == '' else root.sum_to_display)



        # Display chosen cards
        GridLayout:
            size_hint_y: None
            height: '250dp'
            cols: 2
            rows: 8

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 0 else root.list_of_cards[0].name
                on_state: root.add_card(self.state, root.ElfiLucznicy)
            MyLabel:
                text: "card1"

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 1 else root.list_of_cards[1].name
                on_state: root.add_card(self.state, root.ElfiLucznicy)
            MyLabel:
                text: "card2"

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 2 else root.list_of_cards[2].name
                on_state: root.add_card(self.state, root.ElfiLucznicy)
            MyLabel:
                text: "card3"

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 3 else root.list_of_cards[3].name
                on_state: root.add_card(self.state, root.ElfiLucznicy)
            MyLabel:
                text: "card4"

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 4 else root.list_of_cards[4].name
                on_state: root.add_card(self.state, root.ElfiLucznicy)
            MyLabel:
                text: "card5"

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 5 else root.list_of_cards[5].name
                on_state: root.add_card(self.state, root.ElfiLucznicy)
            MyLabel:
                text: "card6"

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 6 else root.list_of_cards[6].name
                on_state: root.add_card(self.state, root.ElfiLucznicy)
            MyLabel:
                text: "card7"

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 7 else "{} {}".format(root.list_of_cards[7].power, root.list_of_cards[7].name)
                on_state: root.add_card(self.state, root.ElfiLucznicy)
            MyLabel:
                text: "card8"

        #List of all cards
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            GridLayout:
                size_hint_y: None
                cols: 1

                GridLayout:
                    id: grid0
                    cols: 1
                    size_hint_y: None
                    height: '30dp'

                    Button:
                        text: "Armia"
                        on_release: dropdown0.open(self); self.parent.height = '185dp'

                    Widget:
                        on_parent: dropdown0.dismiss()

                    DropDown:
                        id: dropdown0
                        on_dismiss: grid0.height = '30dp'


                        ToggleButton:
                            text: "{} {}".format(root.KrasnoludzkaPiechota.power, root.KrasnoludzkaPiechota.name)
                            on_state: root.add_card(self.state, root.KrasnoludzkaPiechota)

                        ToggleButton:
                            text: "{} {}".format(root.ElfiLucznicy.power, root.ElfiLucznicy.name)
                            on_state: root.add_card(self.state, root.ElfiLucznicy)

                        ToggleButton:
                            text: "{} {}".format(root.Rycerze.power, root.Rycerze.name)
                            on_state: root.add_card(self.state, root.Rycerze)

                        ToggleButton:
                            text: "{} {}".format(root.LekkaKonnica.power, root.LekkaKonnica.name)
                            on_state: root.add_card(self.state, root.LekkaKonnica)

                        ToggleButton:
                            text: "{} {}".format(root.Zwiadowcy.power, root.Zwiadowcy.name)
                            on_state: root.add_card(self.state, root.Zwiadowcy)

                GridLayout:
                    id: grid1
                    cols: 1
                    size_hint_y: None
                    height: '30dp'

                    Button:
                        text: "Bestia"
                        on_release: dropdown1.open(self); self.parent.height = '185dp'

                    Widget:
                        on_parent: dropdown1.dismiss()

                    DropDown:
                        id: dropdown1
                        on_dismiss: grid1.height = '30dp'


                        ToggleButton:
                            text: "{} {}".format(root.Bazyliszek.power, root.Bazyliszek.name)
                            on_state: root.add_card(self.state, root.Bazyliszek)

                        ToggleButton:
                            text: "{} {}".format(root.Smok.power, root.Smok.name)
                            on_state: root.add_card(self.state, root.Smok)

                        ToggleButton:
                            text: "{} {}".format(root.Hydra.power, root.Hydra.name)
                            on_state: root.add_card(self.state, root.Hydra)

                        ToggleButton:
                            text: "{} {}".format(root.Jednorozec.power, root.Jednorozec.name)
                            on_state: root.add_card(self.state, root.Jednorozec)

                        ToggleButton:
                            text: "{} {}".format(root.Rumak.power, root.Rumak.name)
                            on_state: root.add_card(self.state, root.Rumak)

                GridLayout:
                    id: grid2
                    cols: 1
                    size_hint_y: None
                    height: '30dp'

                    Button:
                        text: "Płomień"
                        on_release: dropdown2.open(self); self.parent.height = '185dp'

                    Widget:
                        on_parent: dropdown2.dismiss()

                    DropDown:
                        id: dropdown2
                        on_dismiss: grid2.height = '30dp'


                        ToggleButton:
                            text: "{} {}".format(root.Swieca.power, root.Swieca.name)
                            on_state: root.add_card(self.state, root.Swieca)

                        ToggleButton:
                            text: "{} {}".format(root.ZywiolakOgnia.power, root.ZywiolakOgnia.name)
                            on_state: root.add_card(self.state, root.ZywiolakOgnia)

                        ToggleButton:
                            text: "{} {}".format(root.Kuznia.power, root.Kuznia.name)
                            on_state: root.add_card(self.state, root.Kuznia)

                        ToggleButton:
                            text: "{} {}".format(root.Blyskawica.power, root.Blyskawica.name)
                            on_state: root.add_card(self.state, root.Blyskawica)

                        ToggleButton:
                            text: "{} {}".format(root.Pozar.power, root.Pozar.name)
                            on_state: root.add_card(self.state, root.Pozar)

                GridLayout:
                    id: grid3
                    cols: 1
                    size_hint_y: None
                    height: '30dp'

                    Button:
                        text: "Powódź"
                        on_release: dropdown3.open(self); self.parent.height = '185dp'

                    Widget:
                        on_parent: dropdown3.dismiss()

                    DropDown:
                        id: dropdown3
                        on_dismiss: grid3.height = '30dp'


                        ToggleButton:
                            text: "{} {}".format(root.FontannaZycia.power, root.FontannaZycia.name)
                            on_state: root.add_card(self.state, root.FontannaZycia)

                        ToggleButton:
                            text: "{} {}".format(root.Potop.power, root.Potop.name)
                            on_state: root.add_card(self.state, root.Potop)

                        ToggleButton:
                            text: "{} {}".format(root.Kuznia.power, root.Kuznia.name)
                            on_state: root.add_card(self.state, root.Kuznia)

                        ToggleButton:
                            text: "{} {}".format(root.Blyskawica.power, root.Blyskawica.name)
                            on_state: root.add_card(self.state, root.Blyskawica)

                        ToggleButton:
                            text: "{} {}".format(root.Pozar.power, root.Pozar.name)
                            on_state: root.add_card(self.state, root.Pozar)