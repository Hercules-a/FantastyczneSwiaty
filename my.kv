#:set but_pos (10, 10)

<Button>:
    valign: 'center'
    halign: 'center'
    size_hint_y: None
    height: '30dp'

<ChosenCardButton@ToggleButton>:
    height: '30dp'
    size_hint_y: None
    text_size: self.size
    halign: 'center'

<MyLabel@Label>:
    valign: 'center'
    halign: 'center'
    size_hint_y: None
    text_size: self.size
    height: '30dp'

<SelectCardWindow>:
    __safe_id: [dropdown0.__self__, dropdown1.__self__, dropdown2.__self__, dropdown3.__self__, dropdown4.__self__, dropdown5.__self__, dropdown6.__self__, dropdown7.__self__, dropdown8.__self__, dropdown9.__self__]

    GridLayout:
        cols: 1
        anchor_y: 'top'
        size: root.width - 10, root.height - 10
        pos: 5, 5

        GridLayout:
            rows: 1
            size_hint_y: None
            height: '30dp'


            MyLabel:
                text: "Wybrano {}/7".format('0' if root.count_cards == '' else root.count_cards)
            MyLabel:
                text: "Punkty: {}".format('0' if root.sum_to_display == '' else root.sum_to_display)



        # Display chosen cards
        GridLayout:
            size_hint_y: None
            height: '130dp'
            cols: 2
            rows: 4

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 0 else root.list_of_cards[0].name
                on_state: root.add_card(self.state, root.ElfiLucznicy)

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 1 else root.list_of_cards[1].name
                on_state: root.add_card(self.state, root.ElfiLucznicy)

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 2 else root.list_of_cards[2].name
                on_state: root.add_card(self.state, root.ElfiLucznicy)

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 3 else root.list_of_cards[3].name
                on_state: root.add_card(self.state, root.ElfiLucznicy)

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 4 else root.list_of_cards[4].name
                on_state: root.add_card(self.state, root.ElfiLucznicy)

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 5 else root.list_of_cards[5].name
                on_state: root.add_card(self.state, root.ElfiLucznicy)

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 6 else root.list_of_cards[6].name
                on_state: root.add_card(self.state, root.ElfiLucznicy)

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 7 else "{} {}".format(root.list_of_cards[7].power, root.list_of_cards[7].name)
                on_state: root.add_card(self.state, root.ElfiLucznicy)

        #List of all cards
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            GridLayout:
                size_hint_y: None
                cols: 1

                GridLayout:
                    id: grid0
                    cols: 1
                    size_hint_y: None
                    height: '30dp'

                    Button:
                        text: "Armia"
                        on_release: dropdown0.open(self); self.parent.height = '185dp'

                    Widget:
                        on_parent: dropdown0.dismiss()

                    DropDown:
                        id: dropdown0
                        on_dismiss: grid0.height = '30dp'


                        ToggleButton:
                            text: "{} {}".format(root.KrasnoludzkaPiechota.power, root.KrasnoludzkaPiechota.name)
                            on_state: root.add_card(self.state, root.KrasnoludzkaPiechota)

                        ToggleButton:
                            text: "{} {}".format(root.ElfiLucznicy.power, root.ElfiLucznicy.name)
                            on_state: root.add_card(self.state, root.ElfiLucznicy)

                        ToggleButton:
                            text: "{} {}".format(root.Rycerze.power, root.Rycerze.name)
                            on_state: root.add_card(self.state, root.Rycerze)

                        ToggleButton:
                            text: "{} {}".format(root.LekkaKonnica.power, root.LekkaKonnica.name)
                            on_state: root.add_card(self.state, root.LekkaKonnica)

                        ToggleButton:
                            text: "{} {}".format(root.Zwiadowcy.power, root.Zwiadowcy.name)
                            on_state: root.add_card(self.state, root.Zwiadowcy)

                GridLayout:
                    id: grid1
                    cols: 1
                    size_hint_y: None
                    height: '30dp'

                    Button:
                        text: "Bestia"
                        on_release: dropdown1.open(self); self.parent.height = '185dp'

                    Widget:
                        on_parent: dropdown1.dismiss()

                    DropDown:
                        id: dropdown1
                        on_dismiss: grid1.height = '30dp'


                        ToggleButton:
                            text: "{} {}".format(root.Bazyliszek.power, root.Bazyliszek.name)
                            on_state: root.add_card(self.state, root.Bazyliszek)

                        ToggleButton:
                            text: "{} {}".format(root.Smok.power, root.Smok.name)
                            on_state: root.add_card(self.state, root.Smok)

                        ToggleButton:
                            text: "{} {}".format(root.Hydra.power, root.Hydra.name)
                            on_state: root.add_card(self.state, root.Hydra)

                        ToggleButton:
                            text: "{} {}".format(root.Jednorozec.power, root.Jednorozec.name)
                            on_state: root.add_card(self.state, root.Jednorozec)

                        ToggleButton:
                            text: "{} {}".format(root.Rumak.power, root.Rumak.name)
                            on_state: root.add_card(self.state, root.Rumak)

                GridLayout:
                    id: grid2
                    cols: 1
                    size_hint_y: None
                    height: '30dp'

                    Button:
                        text: "Płomień"
                        on_release: dropdown2.open(self); self.parent.height = '185dp'

                    Widget:
                        on_parent: dropdown2.dismiss()

                    DropDown:
                        id: dropdown2
                        on_dismiss: grid2.height = '30dp'


                        ToggleButton:
                            text: "{} {}".format(root.Swieca.power, root.Swieca.name)
                            on_state: root.add_card(self.state, root.Swieca)

                        ToggleButton:
                            text: "{} {}".format(root.ZywiolakOgnia.power, root.ZywiolakOgnia.name)
                            on_state: root.add_card(self.state, root.ZywiolakOgnia)

                        ToggleButton:
                            text: "{} {}".format(root.Kuznia.power, root.Kuznia.name)
                            on_state: root.add_card(self.state, root.Kuznia)

                        ToggleButton:
                            text: "{} {}".format(root.Blyskawica.power, root.Blyskawica.name)
                            on_state: root.add_card(self.state, root.Blyskawica)

                        ToggleButton:
                            text: "{} {}".format(root.Pozar.power, root.Pozar.name)
                            on_state: root.add_card(self.state, root.Pozar)

                GridLayout:
                    id: grid3
                    cols: 1
                    size_hint_y: None
                    height: '30dp'

                    Button:
                        text: "Powódź"
                        on_release: dropdown3.open(self); self.parent.height = '185dp'

                    Widget:
                        on_parent: dropdown3.dismiss()

                    DropDown:
                        id: dropdown3
                        on_dismiss: grid3.height = '30dp'


                        ToggleButton:
                            text: "{} {}".format(root.FontannaZycia.power, root.FontannaZycia.name)
                            on_state: root.add_card(self.state, root.FontannaZycia)

                        ToggleButton:
                            text: "{} {}".format(root.Potop.power, root.Potop.name)
                            on_state: root.add_card(self.state, root.Potop)

                        ToggleButton:
                            text: "{} {}".format(root.Wyspa.power, root.Wyspa.name)
                            on_state: root.add_card(self.state, root.Wyspa)

                        ToggleButton:
                            text: "{} {}".format(root.Bagno.power, root.Bagno.name)
                            on_state: root.add_card(self.state, root.Bagno)

                        ToggleButton:
                            text: "{} {}".format(root.ZywiolakWody.power, root.ZywiolakWody.name)
                            on_state: root.add_card(self.state, root.ZywiolakWody)

                GridLayout:
                    id: grid4
                    cols: 1
                    size_hint_y: None
                    height: '30dp'

                    Button:
                        text: "Kraina"
                        on_release: dropdown4.open(self); self.parent.height = '185dp'

                    Widget:
                        on_parent: dropdown4.dismiss()

                    DropDown:
                        id: dropdown4
                        on_dismiss: grid4.height = '30dp'

                        ToggleButton:
                            text: "{} {}".format(root.Dzwonnica.power, root.Dzwonnica.name)
                            on_state: root.add_card(self.state, root.Dzwonnica)

                        ToggleButton:
                            text: "{} {}".format(root.Jaskinia.power, root.Jaskinia.name)
                            on_state: root.add_card(self.state, root.Jaskinia)

                        ToggleButton:
                            text: "{} {}".format(root.ZywiolakZiemi.power, root.ZywiolakZiemi.name)
                            on_state: root.add_card(self.state, root.ZywiolakZiemi)

                        ToggleButton:
                            text: "{} {}".format(root.Las.power, root.Las.name)
                            on_state: root.add_card(self.state, root.Las)

                        ToggleButton:
                            text: "{} {}".format(root.Gory.power, root.Gory.name)
                            on_state: root.add_card(self.state, root.Gory)

                GridLayout:
                    id: grid5
                    cols: 1
                    size_hint_y: None
                    height: '30dp'

                    Button:
                        text: "Przywódca"
                        on_release: dropdown5.open(self); self.parent.height = '185dp'

                    Widget:
                        on_parent: dropdown5.dismiss()

                    DropDown:
                        id: dropdown5
                        on_dismiss: grid5.height = '30dp'

                        ToggleButton:
                            text: "{} {}".format(root.Cesarzowa.power, root.Cesarzowa.name)
                            on_state: root.add_card(self.state, root.Cesarzowa)

                        ToggleButton:
                            text: "{} {}".format(root.Krol.power, root.Krol.name)
                            on_state: root.add_card(self.state, root.Krol)

                        ToggleButton:
                            text: "{} {}".format(root.Ksiezniczka.power, root.Ksiezniczka.name)
                            on_state: root.add_card(self.state, root.Ksiezniczka)

                        ToggleButton:
                            text: "{} {}".format(root.Krolowa.power, root.Krolowa.name)
                            on_state: root.add_card(self.state, root.Krolowa)

                        ToggleButton:
                            text: "{} {}".format(root.WielkiWodz.power, root.WielkiWodz.name)
                            on_state: root.add_card(self.state, root.WielkiWodz)

                GridLayout:
                    id: grid6
                    cols: 1
                    size_hint_y: None
                    height: '30dp'

                    Button:
                        text: "Broń"
                        on_release: dropdown6.open(self); self.parent.height = '185dp'

                    Widget:
                        on_parent: dropdown6.dismiss()

                    DropDown:
                        id: dropdown6
                        on_dismiss: grid6.height = '30dp'

                        ToggleButton:
                            text: "{} {}".format(root.ElfiDlugiLuk.power, root.ElfiDlugiLuk.name)
                            on_state: root.add_card(self.state, root.ElfiDlugiLuk)

                        ToggleButton:
                            text: "{} {}".format(root.MagicznaRozdzka.power, root.MagicznaRozdzka.name)
                            on_state: root.add_card(self.state, root.MagicznaRozdzka)

                        ToggleButton:
                            text: "{} {}".format(root.MieczKetha.power, root.MieczKetha.name)
                            on_state: root.add_card(self.state, root.MieczKetha)

                        ToggleButton:
                            text: "{} {}".format(root.SterowiecWojenny.power, root.SterowiecWojenny.name)
                            on_state: root.add_card(self.state, root.SterowiecWojenny)

                        ToggleButton:
                            text: "{} {}".format(root.Okret.power, root.Okret.name)
                            on_state: root.add_card(self.state, root.Okret)

                GridLayout:
                    id: grid7
                    cols: 1
                    size_hint_y: None
                    height: '30dp'

                    Button:
                        text: "Pogoda"
                        on_release: dropdown7.open(self); self.parent.height = '185dp'

                    Widget:
                        on_parent: dropdown7.dismiss()

                    DropDown:
                        id: dropdown7
                        on_dismiss: grid7.height = '30dp'

                        ToggleButton:
                            text: "{} {}".format(root.ZywiolakPowietrza.power, root.ZywiolakPowietrza.name)
                            on_state: root.add_card(self.state, root.ZywiolakPowietrza)

                        ToggleButton:
                            text: "{} {}".format(root.Sniezyca.power, root.Sniezyca.name)
                            on_state: root.add_card(self.state, root.Sniezyca)

                        ToggleButton:
                            text: "{} {}".format(root.Burza.power, root.Burza.name)
                            on_state: root.add_card(self.state, root.Burza)

                        ToggleButton:
                            text: "{} {}".format(root.Dym.power, root.Dym.name)
                            on_state: root.add_card(self.state, root.Dym)

                        ToggleButton:
                            text: "{} {}".format(root.Tornado.power, root.Tornado.name)
                            on_state: root.add_card(self.state, root.Tornado)

                GridLayout:
                    id: grid8
                    cols: 1
                    size_hint_y: None
                    height: '30dp'

                    Button:
                        text: "Artefakt"
                        on_release: dropdown8.open(self); self.parent.height = '185dp'

                    Widget:
                        on_parent: dropdown8.dismiss()

                    DropDown:
                        id: dropdown8
                        on_dismiss: grid8.height = '30dp'

                        ToggleButton:
                            text: "{} {}".format(root.KsiegaZmian.power, root.KsiegaZmian.name)
                            on_state: root.add_card(self.state, root.KsiegaZmian)

                        ToggleButton:
                            text: "{} {}".format(root.TarczaKetha.power, root.TarczaKetha.name)
                            on_state: root.add_card(self.state, root.TarczaKetha)

                        ToggleButton:
                            text: "{} {}".format(root.KlejnotPorzadku.power, root.KlejnotPorzadku.name)
                            on_state: root.add_card(self.state, root.KlejnotPorzadku)

                        ToggleButton:
                            text: "{} {}".format(root.DrzewoSwiata.power, root.DrzewoSwiata.name)
                            on_state: root.add_card(self.state, root.DrzewoSwiata)

                        ToggleButton:
                            text: "{} {}".format(root.RunaOchrony.power, root.RunaOchrony.name)
                            on_state: root.add_card(self.state, root.RunaOchrony)

                GridLayout:
                    id: grid9
                    cols: 1
                    size_hint_y: None
                    height: '30dp'

                    Button:
                        text: "Czarodziej"
                        on_release: dropdown9.open(self); self.parent.height = '185dp'

                    Widget:
                        on_parent: dropdown9.dismiss()

                    DropDown:
                        id: dropdown9
                        on_dismiss: grid9.height = '30dp'

                        ToggleButton:
                            text: "{} {}".format(root.WladcaBestii.power, root.WladcaBestii.name)
                            on_state: root.add_card(self.state, root.WladcaBestii)

                        ToggleButton:
                            text: "{} {}".format(root.Kolekcjoner.power, root.Kolekcjoner.name)
                            on_state: root.add_card(self.state, root.Kolekcjoner)

                        ToggleButton:
                            text: "{} {}".format(root.Zaklinaczka.power, root.Zaklinaczka.name)
                            on_state: root.add_card(self.state, root.Zaklinaczka)

                        ToggleButton:
                            text: "{} {}".format(root.Nekromanta.power, root.Nekromanta.name)
                            on_state: root.add_card(self.state, root.Nekromanta)

                        ToggleButton:
                            text: "{} {}".format(root.Czarnoksieznik.power, root.Czarnoksieznik.name)
                            on_state: root.add_card(self.state, root.Czarnoksieznik)

                        ToggleButton:
                            text: "{} {}".format(root.Blazen.power, root.Blazen.name)
                            on_state: root.add_card(self.state, root.Blazen)