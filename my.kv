#:import Factory kivy.factory.Factory

#:set color_armia [0.5, 0.5, 0.5, 1]
#:set color_artefakt [1, 0.39, 0.31, 1]
#:set color_bestia [0.1, 0.7, 0.1, 1]
#:set color_plomien [1, 0.1, 0.1, 1]
#:set color_powodz [0.1, 0.1, 1, 1]
#:set color_kraina [0.55, 0.27, 0.07, 1]
#:set color_przywodca [0.5, 0, 0.5, 1]
#:set color_bron [0.8, 0.8, 0.8, 1]
#:set color_pogoda [0.53, 0.8, 0.98, 1]
#:set color_czarodziej [1, 0.41, 0.7, 1]
#:set color_specjalne [1, 1, 1, 1]

<Button>:
    valign: 'center'
    halign: 'center'
    size_hint_y: None
    height: '25dp'

<ChosenCardButton@Button>:
    #height: '28dp'
    size_hint: .99, .24
    text_size: self.size
    halign: 'center'
    font_size: self.height*0.48

<MyLabel@Label>:
    valign: 'center'
    halign: 'center'
    size_hint_y: None
    text_size: self.size
    height: '25dp'

<SelectCardWindow>:
    __safe_id: [dropdown0.__self__, dropdown1.__self__, dropdown2.__self__, dropdown3.__self__, dropdown4.__self__, dropdown5.__self__, dropdown6.__self__, dropdown7.__self__, dropdown8.__self__, dropdown9.__self__, dropdown10.__self__]

    GridLayout:
        cols: 1
        anchor_y: 'top'
        size: root.width, root.height
        pos: 0, 0

        GridLayout:
            rows: 1
            size_hint: .99, .04
            #height: '26dp'


            MyLabel:
                text: "Wybrano {}".format('0/7' if root.count_cards == '' else root.count_cards)
            Button:
                text: "RESET"
                on_release: root.reset()
                background_color: [1, 0, 0, 1]
            MyLabel:
                text: "Punkty: {}".format('0' if root.sum_to_display == '' else root.sum_to_display)

        # Display chosen cards
        GridLayout:
            size_hint: .99, .23
            #height: '115dp'
            cols: 2
            rows: 4

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 0 else root.list_of_cards[0].name_to_display
                on_release: root.del_card(-1) if len(root.list_of_cards) <= 0 else root.del_card(0)

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 1 else root.list_of_cards[1].name_to_display
                on_release: root.del_card(-1) if len(root.list_of_cards) <= 1 else root.del_card(1)

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 2 else root.list_of_cards[2].name_to_display
                on_release: root.del_card(-1) if len(root.list_of_cards) <= 2 else root.del_card(2)

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 3 else root.list_of_cards[3].name_to_display
                on_release: root.del_card(-1) if len(root.list_of_cards) <= 3 else root.del_card(3)

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 4 else root.list_of_cards[4].name_to_display
                on_release: root.del_card(-1) if len(root.list_of_cards) <= 4 else root.del_card(4)

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 5 else root.list_of_cards[5].name_to_display
                on_release: root.del_card(-1) if len(root.list_of_cards) <= 5 else root.del_card(5)

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 6 else root.list_of_cards[6].name_to_display
                on_release: root.del_card(-1) if len(root.list_of_cards) <= 6 else root.del_card(6)

            ChosenCardButton:
                text: '' if len(root.list_of_cards) <= 7 else root.list_of_cards[7].name_to_display
                on_release: root.del_card(-1) if len(root.list_of_cards) <= 7 else root.del_card(7)

        #List of all cards
        GridLayout:
            size_hint: .99, .74
            cols: 1
            #height: '442dp'

            GridLayout:
                id: grid0
                cols: 1
                size_hint: .99, .058

                Button:
                    text: "Armia"
                    on_release: dropdown0.open(self); self.parent.size_hint = .99, .348
                    background_color: color_armia

                Widget:
                    on_parent: dropdown0.dismiss()

                DropDown:
                    id: dropdown0
                    on_dismiss: grid0.size_hint = .99, .058

                    Button:
                        text: "{} {}".format(root.Zwiadowcy.power, root.Zwiadowcy.name)
                        on_release: root.add_card(root.Zwiadowcy)
                        background_color: color_armia

                    Button:
                        id: elfi_lucznicy
                        text: "{} {}".format(root.ElfiLucznicy.power, root.ElfiLucznicy.name)
                        on_release: root.add_card(root.ElfiLucznicy)
                        background_color: color_armia

                    Button:
                        text: "{} {}".format(root.KrasnoludzkaPiechota.power, root.KrasnoludzkaPiechota.name)
                        on_release: root.add_card(root.KrasnoludzkaPiechota)
                        background_color: color_armia

                    Button:
                        text: "{} {}".format(root.LekkaKonnica.power, root.LekkaKonnica.name)
                        on_release: root.add_card(root.LekkaKonnica)
                        background_color: color_armia

                    Button:
                        text: "{} {}".format(root.Rycerze.power, root.Rycerze.name)
                        on_release: root.add_card(root.Rycerze)
                        background_color: color_armia

            GridLayout:
                id: grid1
                cols: 1
                size_hint: .99, .058

                Button:
                    text: "Bestia"
                    on_release: dropdown1.open(self); self.parent.size_hint = .99, .348
                    background_color: color_bestia

                Widget:
                    on_parent: dropdown1.dismiss()

                DropDown:
                    id: dropdown1
                    on_dismiss: grid1.size_hint = .99, .058

                    Button:
                        text: "{} {}".format(root.Rumak.power, root.Rumak.name)
                        on_release: root.add_card(root.Rumak)
                        background_color: color_bestia

                    Button:
                        text: "{} {}".format(root.Jednorozec.power, root.Jednorozec.name)
                        on_release: root.add_card(root.Jednorozec)
                        background_color: color_bestia

                    Button:
                        text: "{} {}".format(root.Hydra.power, root.Hydra.name)
                        on_release: root.add_card(root.Hydra)
                        background_color: color_bestia

                    Button:
                        text: "{} {}".format(root.Smok.power, root.Smok.name)
                        on_release: root.add_card(root.Smok)
                        background_color: color_bestia

                    Button:
                        text: "{} {}".format(root.Bazyliszek.power, root.Bazyliszek.name)
                        on_release: root.add_card(root.Bazyliszek)
                        background_color: color_bestia

            GridLayout:
                id: grid2
                cols: 1
                size_hint: .99, .058

                Button:
                    text: "Płomień"
                    on_release: dropdown2.open(self); self.parent.size_hint = .99, .348
                    background_color: color_plomien

                Widget:
                    on_parent: dropdown2.dismiss()

                DropDown:
                    id: dropdown2
                    on_dismiss: grid2.size_hint = .99, .058


                    Button:
                        text: "{} {}".format(root.Swieca.power, root.Swieca.name)
                        on_release: root.add_card(root.Swieca)
                        background_color: color_plomien

                    Button:
                        text: "{} {}".format(root.ZywiolakOgnia.power, root.ZywiolakOgnia.name)
                        on_release: root.add_card(root.ZywiolakOgnia)
                        background_color: color_plomien

                    Button:
                        text: "{} {}".format(root.Kuznia.power, root.Kuznia.name)
                        on_release: root.add_card(root.Kuznia)
                        background_color: color_plomien

                    Button:
                        text: "{} {}".format(root.Blyskawica.power, root.Blyskawica.name)
                        on_release: root.add_card(root.Blyskawica)
                        background_color: color_plomien

                    Button:
                        text: "{} {}".format(root.Pozar.power, root.Pozar.name)
                        on_release: root.add_card(root.Pozar)
                        background_color: color_plomien

            GridLayout:
                id: grid3
                cols: 1
                size_hint: .99, .058

                Button:
                    text: "Powódź"
                    on_release: dropdown3.open(self); self.parent.size_hint = .99, .348
                    background_color: color_powodz

                Widget:
                    on_parent: dropdown3.dismiss()

                DropDown:
                    id: dropdown3
                    on_dismiss: grid3.size_hint = .99, .058


                    Button:
                        text: "{} {}".format(root.FontannaZycia.power, root.FontannaZycia.name)
                        on_release: root.add_card(root.FontannaZycia)
                        background_color: color_powodz

                    Button:
                        text: "{} {}".format(root.ZywiolakWody.power, root.ZywiolakWody.name)
                        on_release: root.add_card(root.ZywiolakWody)
                        background_color: color_powodz

                    Button:
                        text: "{} {}".format(root.Wyspa.power, root.Wyspa.name)
                        on_release: root.add_card(root.Wyspa)
                        background_color: color_powodz

                    Button:
                        text: "{} {}".format(root.Bagno.power, root.Bagno.name)
                        on_release: root.add_card(root.Bagno)
                        background_color: color_powodz

                    Button:
                        text: "{} {}".format(root.Potop.power, root.Potop.name)
                        on_release: root.add_card(root.Potop)
                        background_color: color_powodz

            GridLayout:
                id: grid4
                cols: 1
                size_hint: .99, .058

                Button:
                    text: "Kraina"
                    on_release: dropdown4.open(self); self.parent.size_hint = .99, .348
                    background_color: color_kraina

                Widget:
                    on_parent: dropdown4.dismiss()

                DropDown:
                    id: dropdown4
                    on_dismiss: grid4.size_hint = .99, .058

                    Button:
                        text: "{} {}".format(root.ZywiolakZiemi.power, root.ZywiolakZiemi.name)
                        on_release: root.add_card(root.ZywiolakZiemi)
                        background_color: color_kraina

                    Button:
                        text: "{} {}".format(root.Jaskinia.power, root.Jaskinia.name)
                        on_release: root.add_card(root.Jaskinia)
                        background_color: color_kraina

                    Button:
                        text: "{} {}".format(root.Las.power, root.Las.name)
                        on_release: root.add_card(root.Las)
                        background_color: color_kraina

                    Button:
                        text: "{} {}".format(root.Dzwonnica.power, root.Dzwonnica.name)
                        on_release: root.add_card(root.Dzwonnica)
                        background_color: color_kraina

                    Button:
                        text: "{} {}".format(root.Gory.power, root.Gory.name)
                        on_release: root.add_card(root.Gory)
                        background_color: color_kraina

            GridLayout:
                id: grid5
                cols: 1
                size_hint: .99, .058

                Button:
                    text: "Przywódca"
                    on_release: dropdown5.open(self); self.parent.size_hint = .99, .348
                    background_color: color_przywodca

                Widget:
                    on_parent: dropdown5.dismiss()

                DropDown:
                    id: dropdown5
                    on_dismiss: grid5.size_hint = .99, .058

                    Button:
                        text: "{} {}".format(root.Ksiezniczka.power, root.Ksiezniczka.name)
                        on_release: root.add_card(root.Ksiezniczka)
                        background_color: color_przywodca

                    Button:
                        text: "{} {}".format(root.WielkiWodz.power, root.WielkiWodz.name)
                        on_release: root.add_card(root.WielkiWodz)
                        background_color: color_przywodca

                    Button:
                        text: "{} {}".format(root.Krolowa.power, root.Krolowa.name)
                        on_release: root.add_card(root.Krolowa)
                        background_color: color_przywodca

                    Button:
                        text: "{} {}".format(root.Krol.power, root.Krol.name)
                        on_release: root.add_card(root.Krol)
                        background_color: color_przywodca

                    Button:
                        text: "{} {}".format(root.Cesarzowa.power, root.Cesarzowa.name)
                        on_release: root.add_card(root.Cesarzowa)
                        background_color: color_przywodca

            GridLayout:
                id: grid6
                cols: 1
                size_hint: .99, .058

                Button:
                    text: "Broń"
                    on_release: dropdown6.open(self); self.parent.size_hint = .99, .348
                    background_color: color_bron

                Widget:
                    on_parent: dropdown6.dismiss()

                DropDown:
                    id: dropdown6
                    on_dismiss: grid6.size_hint = .99, .058

                    Button:
                        text: "{} {}".format(root.MagicznaRozdzka.power, root.MagicznaRozdzka.name)
                        on_release: root.add_card(root.MagicznaRozdzka)
                        background_color: color_bron

                    Button:
                        text: "{} {}".format(root.ElfiDlugiLuk.power, root.ElfiDlugiLuk.name)
                        on_release: root.add_card(root.ElfiDlugiLuk)
                        background_color: color_bron

                    Button:
                        text: "{} {}".format(root.MieczKetha.power, root.MieczKetha.name)
                        on_release: root.add_card(root.MieczKetha)
                        background_color: color_bron

                    Button:
                        text: "{} {}".format(root.Okret.power, root.Okret.name)
                        on_release: root.add_card(root.Okret)
                        background_color: color_bron

                    Button:
                        text: "{} {}".format(root.SterowiecWojenny.power, root.SterowiecWojenny.name)
                        on_release: root.add_card(root.SterowiecWojenny)
                        background_color: color_bron

            GridLayout:
                id: grid7
                cols: 1
                size_hint: .99, .058

                Button:
                    text: "Pogoda"
                    on_release: dropdown7.open(self); self.parent.size_hint = .99, .348
                    background_color: color_pogoda

                Widget:
                    on_parent: dropdown7.dismiss()

                DropDown:
                    id: dropdown7
                    on_dismiss: grid7.size_hint = .99, .058

                    Button:
                        text: "{} {}".format(root.ZywiolakPowietrza.power, root.ZywiolakPowietrza.name)
                        on_release: root.add_card(root.ZywiolakPowietrza)
                        background_color: color_pogoda

                    Button:
                        text: "{} {}".format(root.Burza.power, root.Burza.name)
                        on_release: root.add_card(root.Burza)
                        background_color: color_pogoda

                    Button:
                        text: "{} {}".format(root.Tornado.power, root.Tornado.name)
                        on_release: root.add_card(root.Tornado)
                        background_color: color_pogoda

                    Button:
                        text: "{} {}".format(root.Dym.power, root.Dym.name)
                        on_release: root.add_card(root.Dym)
                        background_color: color_pogoda

                    Button:
                        text: "{} {}".format(root.Sniezyca.power, root.Sniezyca.name)
                        on_release: root.add_card(root.Sniezyca)
                        background_color: color_pogoda

            GridLayout:
                id: grid8
                cols: 1
                size_hint: .99, .058

                Button:
                    text: "Artefakt"
                    on_release: dropdown8.open(self); self.parent.size_hint = .99, .348
                    background_color: color_artefakt

                Widget:
                    on_parent: dropdown8.dismiss()

                DropDown:
                    id: dropdown8
                    on_dismiss: grid8.size_hint = .99, .058

                    Button:
                        text: "{} {}".format(root.RunaOchrony.power, root.RunaOchrony.name)
                        on_release: root.add_card(root.RunaOchrony)
                        background_color: color_artefakt

                    Button:
                        text: "{} {}".format(root.DrzewoSwiata.power, root.DrzewoSwiata.name)
                        on_release: root.add_card(root.DrzewoSwiata)
                        background_color: color_artefakt

                    Button:
                        text: "{} {}".format(root.KsiegaZmian.power, root.KsiegaZmian.name)
                        on_release: root.add_card(root.KsiegaZmian)
                        background_color: color_artefakt

                    Button:
                        text: "{} {}".format(root.TarczaKetha.power, root.TarczaKetha.name)
                        on_release: root.add_card(root.TarczaKetha)
                        background_color: color_artefakt

                    Button:
                        text: "{} {}".format(root.KlejnotPorzadku.power, root.KlejnotPorzadku.name)
                        on_release: root.add_card(root.KlejnotPorzadku)
                        background_color: color_artefakt

            GridLayout:
                id: grid9
                cols: 1
                size_hint: .99, .058

                Button:
                    text: "Czarodziej"
                    on_release: dropdown9.open(self); self.parent.size_hint = .99, .41
                    background_color: color_czarodziej

                Widget:
                    on_parent: dropdown9.dismiss()

                DropDown:
                    id: dropdown9
                    on_dismiss: grid9.size_hint = .99, .058

                    Button:
                        text: "{} {}".format(root.Blazen.power, root.Blazen.name)
                        on_release: root.add_card(root.Blazen)
                        background_color: color_czarodziej

                    Button:
                        text: "{} {}".format(root.Nekromanta.power, root.Nekromanta.name)
                        on_release: root.add_card(root.Nekromanta)
                        background_color: color_czarodziej

                    Button:
                        text: "{} {}".format(root.Zaklinaczka.power, root.Zaklinaczka.name)
                        on_release: root.add_card(root.Zaklinaczka)
                        background_color: color_czarodziej

                    Button:
                        text: "{} {}".format(root.Kolekcjoner.power, root.Kolekcjoner.name)
                        on_release: root.add_card(root.Kolekcjoner)
                        background_color: color_czarodziej

                    Button:
                        text: "{} {}".format(root.WladcaBestii.power, root.WladcaBestii.name)
                        on_release: root.add_card(root.WladcaBestii)
                        background_color: color_czarodziej

                    Button:
                        text: "{} {}".format(root.Czarnoksieznik.power, root.Czarnoksieznik.name)
                        on_release: root.add_card(root.Czarnoksieznik)
                        background_color: color_czarodziej

            GridLayout:
                id: grid10
                cols: 1
                size_hint: .99, .058

                Button:
                    text: "Karty specjalne"
                    on_release: dropdown10.open(self); self.parent.size_hint = .99, .23
                    background_color: color_specjalne

                Widget:
                    on_parent: dropdown10.dismiss()

                DropDown:
                    id: dropdown10
                    on_dismiss: grid10.size_hint = .99, .058

                    Button:
                        text: "{} {}".format(root.Mimik.power, root.Mimik.name)
                        on_release: root.add_card(root.Mimik)
                        background_color: color_specjalne

                    Button:
                        text: "{} {}".format(root.Fatamorgana.power, root.Fatamorgana.name)
                        on_release: root.add_card(root.Fatamorgana)
                        background_color: color_specjalne

                    Button:
                        text: "{} {}".format(root.Zmiennoksztaltny.power, root.Zmiennoksztaltny.name)
                        on_release: root.add_card(root.Zmiennoksztaltny)
                        background_color: color_specjalne

<WyspaPopup>:
    title: "Wyspa"
    size: "300dp", "150dp"
    size_hint: (None, None)
    auto_dismiss: False

    GridLayout:
        cols: 1
        anchor_y: 'top'
        size: root.width, root.height
        pos: root.x, root.y

        Button:
            text: "18 Bagno"
            on_release: root.use("Bagno")
            background_color: color_powodz
            size_hint: .99, .33

        Button:
            text: "32 Potop"
            on_release: root.use("Potop")
            background_color: color_powodz
            size_hint: .99, .33

        Button:
            text: "40 Pożar"
            on_release: root.use("Pożar")
            background_color: color_plomien
            size_hint: .99, .33

<MimikPopup>:
    title: ""
    size: "300dp", "340dp"
    size_hint: (None, None)
    auto_dismiss: False

    GridLayout:
        cols: 1
        anchor_y: 'top'
        size: root.width, root.height
        pos: root.x, root.y

        ChosenCardButton:
            text: '' if len(root.list_of_cards) <= 1 else root.list_of_cards[0].name_to_display
            on_release: root.use(False) if len(root.list_of_cards) <= 1 else root.use(root.list_of_cards[0])

        ChosenCardButton:
            text: '' if len(root.list_of_cards) <= 2 else root.list_of_cards[1].name_to_display
            on_release: root.use(False) if len(root.list_of_cards) <= 2 else root.use(root.list_of_cards[1])

        ChosenCardButton:
            text: '' if len(root.list_of_cards) <= 3 else root.list_of_cards[2].name_to_display
            on_release: root.use(False) if len(root.list_of_cards) <= 3 else root.use(root.list_of_cards[2])

        ChosenCardButton:
            text: '' if len(root.list_of_cards) <= 4 else root.list_of_cards[3].name_to_display
            on_release: root.use(False) if len(root.list_of_cards) <= 4 else root.use(root.list_of_cards[3])

        ChosenCardButton:
            text: '' if len(root.list_of_cards) <= 5 else root.list_of_cards[4].name_to_display
            on_release: root.use(False) if len(root.list_of_cards) <= 5 else root.use(root.list_of_cards[4])

        ChosenCardButton:
            text: '' if len(root.list_of_cards) <= 6 else root.list_of_cards[5].name_to_display
            on_release: root.use(False) if len(root.list_of_cards) <= 6 else root.use(root.list_of_cards[5])

        ChosenCardButton:
            text: '' if len(root.list_of_cards) <= 7 else root.list_of_cards[6].name_to_display
            on_release: root.use(False) if len(root.list_of_cards) <= 7 else root.use(root.list_of_cards[6])

        ChosenCardButton:
            text: '' if len(root.list_of_cards) <= 8 else root.list_of_cards[7].name_to_display
            on_release: root.use(False) if len(root.list_of_cards) <= 8 else root.use(root.list_of_cards[7])

<KsiegaZmianSetPopup>:
    title: "Księga zmian"
    size: "300dp", "340dp"
    size_hint: (None, None)
    auto_dismiss: False

    GridLayout:
        cols: 1
        anchor_y: 'top'
        size: root.width, root.height
        pos: root.x, root.y

        Button:
            text: "Armia"
            on_release: root.use("Armia")
            background_color: color_armia

        Button:
            text: "Artefakt"
            on_release: root.use("Artefakt")
            background_color: color_artefakt

        Button:
            text: "Bestia"
            on_release: root.use("Bestia")
            background_color: color_bestia

        Button:
            text: "Płomień"
            on_release: root.use("Płomień")
            background_color: color_plomien

        Button:
            text: "Powódź"
            on_release: root.use("Powódź")
            background_color: color_powodz

        Button:
            text: "Kraina"
            on_release: root.use("Kraina")
            background_color: color_kraina

        Button:
            text: "Przywódca"
            on_release: root.use("Przywódca")
            background_color: color_przywodca

        Button:
            text: "Broń"
            on_release: root.use("Broń")
            background_color: color_bron

        Button:
            text: "Pogoda"
            on_release: root.use("Pogoda")
            background_color: color_pogoda

        Button:
            text: "Czarodziej"
            on_release: root.use("Czarodziej")
            background_color: color_czarodziej

        Button:
            text: "Karty Specjalne"
            on_release: root.use("Specjalne")
            background_color: color_specjalne

<ZmiennoksztaltnyPopup>:
    __safe_id: [dropdown1.__self__, dropdown5.__self__, dropdown6.__self__, dropdown8.__self__, dropdown9.__self__]


    title: "Zmiennokształtny"
    size: "300dp", "340dp"
    size_hint: (None, None)
    auto_dismiss: False

    GridLayout:
        cols: 1
        anchor_y: 'top'
        size: root.width - 10, root.height - 10
        pos: 5, 5

        #List of all cards
        GridLayout:
            size_hint_y: None
            cols: 1

            GridLayout:
                id: grid1
                cols: 1
                size_hint_y: None
                height: '26dp'

                Button:
                    text: "Bestia"
                    on_release: dropdown1.open(self); self.parent.height = '152dp'
                    background_color: color_bestia

                Widget:
                    on_parent: dropdown1.dismiss()

                DropDown:
                    id: dropdown1
                    on_dismiss: grid1.height = '26dp'

                    Button:
                        text: "Rumak"
                        on_release: root.add_card("Rumak", "Bestia"); dropdown1.dismiss()
                        background_color: color_bestia

                    Button:
                        text: "Jednorożec"
                        on_release: root.add_card("Jednorożec", "Bestia"); dropdown1.dismiss()
                        background_color: color_bestia

                    Button:
                        text: "Hydra"
                        on_release: root.add_card("Hydra", "Bestia"); dropdown1.dismiss()
                        background_color: color_bestia

                    Button:
                        text: "Smok"
                        on_release: root.add_card("Smok", "Bestia"); dropdown1.dismiss()
                        background_color: color_bestia

                    Button:
                        text: "Bazyliszek"
                        on_release: root.add_card("Bazyliszek", "Bestia"); dropdown1.dismiss()
                        background_color: color_bestia

            GridLayout:
                id: grid5
                cols: 1
                size_hint_y: None
                height: '26dp'

                Button:
                    text: "Przywódca"
                    on_release: dropdown5.open(self); self.parent.height = '152dp'
                    background_color: color_przywodca

                Widget:
                    on_parent: dropdown5.dismiss()

                DropDown:
                    id: dropdown5
                    on_dismiss: grid5.height = '26dp'

                    Button:
                        text: "Księżniczka"
                        on_release: root.add_card("Księżniczka", "Przywódca"); dropdown5.dismiss()
                        background_color: color_przywodca

                    Button:
                        text: "Wielki wódz"
                        on_release: root.add_card("Wielki wódz", "Przywódca"); dropdown5.dismiss()
                        background_color: color_przywodca

                    Button:
                        text: "Królowa"
                        on_release: root.add_card("Królowa", "Przywódca"); dropdown5.dismiss()
                        background_color: color_przywodca

                    Button:
                        text: "Król"
                        on_release: root.add_card("Król", "Przywódca"); dropdown5.dismiss()
                        background_color: color_przywodca

                    Button:
                        text: "Cesarzowa"
                        on_release: root.add_card("Cesarzowa", "Przywódca"); dropdown5.dismiss()
                        background_color: color_przywodca

            GridLayout:
                id: grid6
                cols: 1
                size_hint_y: None
                height: '26dp'

                Button:
                    text: "Broń"
                    on_release: dropdown6.open(self); self.parent.height = '152dp'
                    background_color: color_bron

                Widget:
                    on_parent: dropdown6.dismiss()

                DropDown:
                    id: dropdown6
                    on_dismiss: grid6.height = '26dp'

                    Button:
                        text: "Magiczna różdżka"
                        on_release: root.add_card("Magiczna różdżka", "Broń"); dropdown6.dismiss()
                        background_color: color_bron

                    Button:
                        text: "Elfi długi łuk"
                        on_release: root.add_card("Elfi długi łuk", "Broń"); dropdown6.dismiss()
                        background_color: color_bron

                    Button:
                        text: "Miecz Ketha"
                        on_release: root.add_card("Miecz Ketha", "Broń"); dropdown6.dismiss()
                        background_color: color_bron

                    Button:
                        text: "Okręt"
                        on_release: root.add_card("Okręt", "Broń"); dropdown6.dismiss()
                        background_color: color_bron

                    Button:
                        text: "Sterowiec wojenny"
                        on_release: root.add_card("Sterowiec wojenny", "Broń"); dropdown6.dismiss()
                        background_color: color_bron

            GridLayout:
                id: grid8
                cols: 1
                size_hint_y: None
                height: '26dp'

                Button:
                    text: "Artefakt"
                    on_release: dropdown8.open(self); self.parent.height = '152dp'
                    background_color: color_artefakt

                Widget:
                    on_parent: dropdown8.dismiss()

                DropDown:
                    id: dropdown8
                    on_dismiss: grid8.height = '26dp'

                    Button:
                        text: "Runa ochrony"
                        on_release: root.add_card("Runa ochrony", "Artefakt"); dropdown8.dismiss()
                        background_color: color_artefakt

                    Button:
                        text: "Drzewo świata"
                        on_release: root.add_card("Drzewo świata", "Artefakt"); dropdown8.dismiss()
                        background_color: color_artefakt

                    Button:
                        text: "Księga zmian"
                        on_release: root.add_card("Księga zmian", "Artefakt"); dropdown8.dismiss()
                        background_color: color_artefakt

                    Button:
                        text: "Tarcza Ketha"
                        on_release: root.add_card("Tarcza Ketha", "Artefakt"); dropdown8.dismiss()
                        background_color: color_artefakt

                    Button:
                        text: "Klejnot porządku"
                        on_release: root.add_card("Klejnot porządku", "Artefakt"); dropdown8.dismiss()
                        background_color: color_artefakt

            GridLayout:
                id: grid9
                cols: 1
                size_hint_y: None
                height: '26dp'

                Button:
                    text: "Czarodziej"
                    on_release: dropdown9.open(self); self.parent.height = '177dp'
                    background_color: color_czarodziej

                Widget:
                    on_parent: dropdown9.dismiss()

                DropDown:
                    id: dropdown9
                    on_dismiss: grid9.height = '26dp'

                    Button:
                        text: "Błazen"
                        on_release: root.add_card("Błazen", "Czarodziej"); dropdown9.dismiss()
                        background_color: color_czarodziej

                    Button:
                        text: "Nekromanta"
                        on_release: root.add_card("Nekromanta", "Czarodziej"); dropdown9.dismiss()
                        background_color: color_czarodziej

                    Button:
                        text: "Zaklinaczka"
                        on_release: root.add_card("Zaklinaczka", "Czarodziej"); dropdown9.dismiss()
                        background_color: color_czarodziej

                    Button:
                        text: "Kolekcjoner"
                        on_release: root.add_card("Kolekcjoner", "Czarodziej"); dropdown9.dismiss()
                        background_color: color_czarodziej

                    Button:
                        text: "Władca bestii"
                        on_release: root.add_card("Władca bestii", "Czarodziej"); dropdown9.dismiss()
                        background_color: color_czarodziej

                    Button:
                        text: "Czarnoksiężnik"
                        on_release: root.add_card("Czarnoksiężnik", "Czarodziej"); dropdown9.dismiss()
                        background_color: color_czarodziej

<FatamorganaPopup>:
    __safe_id: [dropdown0.__self__, dropdown2.__self__, dropdown3.__self__, dropdown4.__self__, dropdown7.__self__]

    title: "Fatamorgana"
    size: "300dp", "320dp"
    size_hint: (None, None)
    auto_dismiss: False

    GridLayout:
        cols: 1
        anchor_y: 'top'
        size: root.width - 10, root.height - 10
        pos: 5, 5
        #List of all cards
        GridLayout:
            size_hint_y: None
            cols: 1

            GridLayout:
                id: grid0
                cols: 1
                size_hint_y: None
                height: '26dp'

                Button:
                    text: "Armia"
                    on_release: dropdown0.open(self); self.parent.height = '152dp'
                    background_color: color_armia

                Widget:
                    on_parent: dropdown0.dismiss()

                DropDown:
                    id: dropdown0
                    on_dismiss: grid0.height = '26dp'

                    Button:
                        text: "Zwiadowcy"
                        on_release: root.add_card("Zwiadowcy", "Armia"); dropdown0.dismiss()
                        background_color: color_armia

                    Button:
                        text: "Elfi łucznicy"
                        on_release: root.add_card("Elfi łucznicy", "Armia"); dropdown0.dismiss()
                        background_color: color_armia

                    Button:
                        text: "Krasnoludzka piechota"
                        on_release: root.add_card("Krasnoludzka piechota", "Armia"); dropdown0.dismiss()
                        background_color: color_armia

                    Button:
                        text: "Lekka konnica"
                        on_release: root.add_card("Lekka konnica", "Armia"); dropdown0.dismiss()
                        background_color: color_armia

                    Button:
                        text: "Rycerze"
                        on_release: root.add_card("Rycerze", "Armia"); dropdown0.dismiss()
                        background_color: color_armia

            GridLayout:
                id: grid2
                cols: 1
                size_hint_y: None
                height: '26dp'

                Button:
                    text: "Płomień"
                    on_release: dropdown2.open(self); self.parent.height = '152dp'
                    background_color: color_plomien

                Widget:
                    on_parent: dropdown2.dismiss()

                DropDown:
                    id: dropdown2
                    on_dismiss: grid2.height = '26dp'


                    Button:
                        text: "Świeca"
                        on_release: root.add_card("Świeca", "Płomień"); dropdown2.dismiss()
                        background_color: color_plomien

                    Button:
                        text: "Żywiołak ognia"
                        on_release: root.add_card("Żywiołak ognia", "Płomień"); dropdown2.dismiss()
                        background_color: color_plomien

                    Button:
                        text: "Kuźnia"
                        on_release: root.add_card("Kuźnia", "Płomień"); dropdown2.dismiss()
                        background_color: color_plomien

                    Button:
                        text: "Błyskawica"
                        on_release: root.add_card("Błyskawica", "Płomień"); dropdown2.dismiss()
                        background_color: color_plomien

                    Button:
                        text: "Pożar"
                        on_release: root.add_card("Pożar", "Płomień"); dropdown2.dismiss()
                        background_color: color_plomien

            GridLayout:
                id: grid3
                cols: 1
                size_hint_y: None
                height: '26dp'

                Button:
                    text: "Powódź"
                    on_release: dropdown3.open(self); self.parent.height = '152dp'
                    background_color: color_powodz

                Widget:
                    on_parent: dropdown3.dismiss()

                DropDown:
                    id: dropdown3
                    on_dismiss: grid3.height = '26dp'

                    Button:
                        text: "Fontanna życia"
                        on_release: root.add_card("Fontanna życia", "Powódź"); dropdown3.dismiss()
                        background_color: color_powodz

                    Button:
                        text: "Żywiołak wody"
                        on_release: root.add_card("Żywiołak wody", "Powódź"); dropdown3.dismiss()
                        background_color: color_powodz

                    Button:
                        text: "Wyspa"
                        on_release: root.add_card("Wyspa", "Powódź"); dropdown3.dismiss()
                        background_color: color_powodz

                    Button:
                        text: "Bagno"
                        on_release: root.add_card("Bagno", "Powódź"); dropdown3.dismiss()
                        background_color: color_powodz

                    Button:
                        text: "Potop"
                        on_release: root.add_card("Potop", "Powódź"); dropdown3.dismiss()
                        background_color: color_powodz

            GridLayout:
                id: grid4
                cols: 1
                size_hint_y: None
                height: '26dp'

                Button:
                    text: "Kraina"
                    on_release: dropdown4.open(self); self.parent.height = '152dp'
                    background_color: color_kraina

                Widget:
                    on_parent: dropdown4.dismiss()

                DropDown:
                    id: dropdown4
                    on_dismiss: grid4.height = '26dp'

                    Button:
                        text: "Żywiołak ziemi"
                        on_release: root.add_card("Żywiołak ziemi", "Kraina"); dropdown4.dismiss()
                        background_color: color_kraina

                    Button:
                        text: "Jaskinia"
                        on_release: root.add_card("Jaskinia", "Kraina"); dropdown4.dismiss()
                        background_color: color_kraina

                    Button:
                        text: "Las"
                        on_release: root.add_card("Las", "Kraina"); dropdown4.dismiss()
                        background_color: color_kraina

                    Button:
                        text: "Dzwonnica"
                        on_release: root.add_card("Dzwonnica", "Kraina"); dropdown4.dismiss()
                        background_color: color_kraina

                    Button:
                        text: "Góry"
                        on_release: root.add_card("Góry", "Kraina"); dropdown4.dismiss()
                        background_color: color_kraina

            GridLayout:
                id: grid7
                cols: 1
                size_hint_y: None
                height: '26dp'

                Button:
                    text: "Pogoda"
                    on_release: dropdown7.open(self); self.parent.height = '152dp'
                    background_color: color_pogoda

                Widget:
                    on_parent: dropdown7.dismiss()

                DropDown:
                    id: dropdown7
                    on_dismiss: grid7.height = '26dp'

                    Button:
                        text: "Żywiołak powietrza"
                        on_release: root.add_card("Żywiołak powietrza", "Pogoda"); dropdown7.dismiss()
                        background_color: color_pogoda

                    Button:
                        text: "Burza"
                        on_release: root.add_card("Burza", "Pogoda"); dropdown7.dismiss()
                        background_color: color_pogoda

                    Button:
                        text: "Tornado"
                        on_release: root.add_card("Tornado", "Pogoda"); dropdown7.dismiss()
                        background_color: color_pogoda

                    Button:
                        text: "Dym"
                        on_release: root.add_card("Dym", "Pogoda"); dropdown7.dismiss()
                        background_color: color_pogoda

                    Button:
                        text: "Śnieżyca"
                        on_release: root.add_card("Śnieżyca", "Pogoda"); dropdown7.dismiss()
                        background_color: color_pogoda
